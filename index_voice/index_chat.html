<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chatapp</title>

    <style>
        .name{
            font-size: 10px;
        }
        .text{
            font-size: 16px;
        }
    </style>

</head>
<body>
    <div> 
        <div>
            <input type="text" id="username">
        </div>
        <div>
            <textarea id="text" rows="5"></textarea>
            <button id="send">send</button>
        </div>
        <div id="output"></div>
    </div>
    
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-analytics.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyBIAc6iXczUnt3rfobacJCLmCXCrALzTME",
          authDomain: "chatapp-101da.firebaseapp.com",
          projectId: "chatapp-101da",
          storageBucket: "chatapp-101da.appspot.com",
          messagingSenderId: "467313492978",
          appId: "1:467313492978:web:7e395142df568732a8a16b",
          measurementId: "G-JMJ3HDTJZX"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);



        //準備
const newPostRef = firebase.database();
let room = "room1";

  const send = document.getElementById("send");
  const username = document.getElementById("username");
  const text = document.getElementById("text");
  const output = document.getElementById("output")

  //Msg送信処理
  send.addEventListener('click', function(){
    newPostRef.ref(room).push({
        username: username.value,
        text: text.value
    });
    text.value = "";



//書き込み処理
newPostRef.ref(room).push({
        //書き込む内容
    });

//読み込み処理
newPostRef.ref(room).on("child_added",function(data){
    const v = data.val(); //データ取得
    const k = data.key;   //ユニークkey取得

    let str ="";

str += '<div class="name">'+ v.username +'</div>';
str += '<div class="text">'+ v.text +'</div>';

output.innerHTML += str;

    
    //読み込む内容

 });

      </script>
    
</body>
</html>